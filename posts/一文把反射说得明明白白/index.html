<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="这是一个个人博客，记录技术学习和生活感悟"><title>一文把反射说得明明白白 | RenaXu 's Wonderland</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/css/custom-icons.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/css/toc.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><div class="darkmode-toggle">🌓</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">一文把反射说得明明白白</h1><a id="logo" href="/.">RenaXu 's Wonderland</a><p class="description">分享技术与生活</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-4-4"><div class="content_container"><div class="post"><h1 class="post-title">一文把反射说得明明白白</h1><div class="post-meta">2025-08-13<span> | </span><span class="category"><a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.2k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 4</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">1. 先搞明白 Java 运行时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">2. 那反射跟运行时有什么关系？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">3. 框架为什么爱用反射？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">4. Go 语言里的反射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">5. 总结</span></a></li></ol></div></div><div class="post-content"><blockquote>
<p>说到<strong>反射</strong>，大家可能并不陌生。Java有这个概念，Go语言也有。但无论是官网还是各路教程，往往说得玄乎又抽象，让人看完还是一脸问号。今天我们就用最通俗的语言，把它说清楚。</p>
</blockquote>
<p>先以 <strong>Java反射</strong> 举个例子。</p>
<h3><span id="1-先搞明白-java-运行时">1. 先搞明白 Java 运行时</span></h3><p>Java 写好的代码要先编译成 <code>.class</code> 字节码文件，再由 Java 虚拟机（JVM）翻译成二进制机器码运行。JVM 可以根据不同操作系统适配成对应的机器码，这就是 Java 那句经典口号——“一次编写，到处运行”。</p>
<p>所谓 <strong>运行时</strong>，就是 Java 代码编译成 <code>.class</code> 后，在 JVM 里运行的那个状态。</p>
<h3><span id="2-那反射跟运行时有什么关系">2. 那反射跟运行时有什么关系？</span></h3><p>反射的核心功能是：<strong>在运行时获取类的信息（方法名、字段、类型等），甚至调用它们，而不需要在代码里提前写死</strong>。</p>
<p>为什么能做到？<br>因为在编译 <code>.java</code> 文件成 <code>.class</code> 的时候，类的结构（方法名、参数类型、字段类型等）会被完整写进字节码文件里。JVM 不仅保存了这些信息，还提供了读取它们的 API。反射就是利用这些 API，在程序运行中获取到类型和值。</p>
<p>这就是反射的本质——<strong>运行时动态探测和操作类型信息</strong>。所以我们通过反射就不需要提前写死声明，他在运行时自己探测。</p>
<h3><span id="3-框架为什么爱用反射">3. 框架为什么爱用反射？</span></h3><p>知道了他的本质，我们再看它的应用场景，</p>
<p>举个 Java 框架的例子，比如 Spring Boot。<br>在我们自己写代码时，<code>new</code> 一个对象是显式写出来的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyService</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyService</span>();</span><br></pre></td></tr></table></figure>

<p>而 Spring Boot 可以<strong>不用你手动写</strong>，就直接实例化一个对象并注入到类里。这背后就是反射——框架在运行时扫描类，通过反射找到可用的构造方法，然后动态 <code>new</code> 出对象。举个栗子：</p>
<p>假设你有如下的类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>  <span class="comment">// 标记为Spring管理的bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">performAction</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Action performed!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后你有一个需要MyService的类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> MyService myService;  <span class="comment">// 自动注入MyService</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        myService.performAction();  <span class="comment">// 使用注入的MyService对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在这个例子中：</p>
<p>@Component标记了MyService和Application类，Spring Boot会自动将它们注册为bean。</p>
<p>@Autowired标记在Application类的myService字段上，Spring会通过反射自动注入MyService的实例。</p>
<p>因此你并不需要显式地使用new MyService()来创建对象，Spring会在幕后通过反射来完成这一过程。</p>
<blockquote>
<p>其中@Component和@Autowired就是 Java 里的<strong>注解</strong>。 通常它写在类、方法、字段前面，形如 <code>@Something</code>，相当于一个标签，用来告诉框架“这里有特殊处理”。框架在启动时会扫描项目的所有类，通过反射获取它们的注解信息，然后按照注解规则去做事。</p>
</blockquote>
<blockquote>
<p>注解有两类： 1、标记类、方法、字段为bean，使得它们可以被Spring容器管理,如@Component ；2、注入其他bean到类的字段、方法或构造器中，帮助实现依赖注入，达到解耦目的，如@Autowired</p>
</blockquote>
<p>说白了，框架的本质就是一堆通用功能的集合。用盖房子打比方：</p>
<ul>
<li>以前我们写业务代码，得从零打地基、搬砖盖墙（搭建底层架构）</li>
<li>有了框架，就像开发商先帮你把毛坯房造好，你直接装修（写业务逻辑）就行</li>
</ul>
<p>而反射，就是框架实现“自动适配你写的代码”的关键工具。</p>
<h3><span id="4-go-语言里的反射">4. Go 语言里的反射</span></h3><p>Go 的反射原理和 Java 非常像：</p>
<table>
<thead>
<tr>
<th><strong>Java反射</strong></th>
<th><strong>Go反射</strong></th>
</tr>
</thead>
<tbody><tr>
<td>通过JVM的API访问类型的元信息（如<code>Class</code>、<code>Method</code>等）。</td>
<td>通过Go的<code>reflect</code>包来访问类型和值的元信息。</td>
</tr>
<tr>
<td>Java依赖JVM在运行时维护的类型信息。</td>
<td>Go依赖编译时生成的运行时类型信息。</td>
</tr>
<tr>
<td>主要通过<code>Class</code>类和<code>java.lang.reflect</code>包进行反射操作。</td>
<td>主要通过<code>reflect.Type</code>和<code>reflect.Value</code>进行反射操作。</td>
</tr>
</tbody></table>
<p>比如 Go 里的结构体标签（tag）：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当我们用 <code>json.Marshal()</code> 把结构体转成 JSON 时，<code>encoding/json</code> 包会通过反射读取 <code>tag</code> 信息，然后决定用哪个字段名。</p>
<p>很多 Go 框架（如 Gin、GORM）也大量使用反射来实现自动映射、自动注入等功能。</p>
<h3><span id="5-总结">5. 总结</span></h3><p>反射其实没那么神秘——<strong>它就是在运行时，把“看似未知”的东西变成已知的，把“不可见”的类型和值变成可见并可操作的</strong>。它的实现依赖于语言编译器和运行时提供的元信息和接口。</p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%88%86%E4%BA%AB/" rel="tag">分享</a></li></ul></div><div class="post-nav"><a class="pre" href="/posts/%E5%86%99%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%84%9F%E6%82%9F/">写接口的感悟</a><a class="next" href="/posts/etcd%E4%B8%8Eredis%E7%9A%84%E7%89%B9%E6%80%A7%E8%A7%A3%E6%9E%90/">etcd与redis的特性解析</a></div></div></div></div><div class="pure-u-1 pure-u-md-4-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">RenaXu 's Wonderland.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script><script type="text/javascript" src="/js/toc.js?v=1.0.0"></script></div></body></html>